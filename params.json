{"name":"WRT-SPAN","body":"<h2>WRT-SPAN: OpenWRT Switch Port Analyzer (SPAN)</h2>\r\n<h3>aka Project High Life: The champagne of cheap routers</h3>\r\n\r\nhttp://vinsec.blogspot.com\r\n\r\nThis project provides software and configuration templates for building a network-managed multi-port filtering/aggregating full-frame Ethernet Switch Port ANalyzer (SPAN) device using <a href=\"http://openwrt.org\">OpenWRT</a> and <a href=\"http://www.snort.org/snort-downloads/additional-downloadaemonlogger\">Daemonlogger</a>.\r\n\r\nHere's a block diagram of what's going on inside my makeshift tap:<br />\r\n\r\n<div class=\"separator\" style=\"clear: both; text-align: center;\">\r\n  <a href=\"http://4.bp.blogspot.com/-M2VNQ9loqn8/T61oGYhsbMI/AAAAAAAAAE0/VcdiLoEO-vM/s1600/Kenny-inkscape.png\"\r\n    imageanchor=\"1\" style=\"margin-left: 1em; margin-right: 1em;\">\r\n    <img alt=\"kenny\" title=\"kenny\" width=\"400\" border=\"0\"\r\n      src=\"http://4.bp.blogspot.com/-M2VNQ9loqn8/T61oGYhsbMI/AAAAAAAAAE0/VcdiLoEO-vM/s1600/Kenny-inkscape.png\"/>\r\n  </a>\r\n</div>\r\nEverything on my network is named after a character from South Park, and Kenny seemed like an appropriate name for this little fella because he died many, many horrible deaths along the way to getting this right.\r\n\r\n<h2>Ethernet and Bridge Configuration</h2>\r\n<pre>\r\n\r\nroot@kenny:~# dmesg | egrep 'Ethernet|switch'\r\nssb: Core 1 found: Fast Ethernet (cc 0x806, rev 0x06, vendor 0x4243)\r\nssb: Core 2 found: Fast Ethernet (cc 0x806, rev 0x06, vendor 0x4243)\r\neth0: Broadcom 44xx/47xx 10/100BaseT Ethernet 00:1d:7e:43:e1:66\r\neth1: Broadcom 44xx/47xx 10/100BaseT Ethernet 00:88:88:88:00:2a\r\nroboswitch: Probing device eth0: found a 5325! It's a 5350.\r\n\r\n\r\n\r\nroot@kenny:~# ifconfig\r\nbr-bridge Link encap:Ethernet  HWaddr 00:1D:7E:43:E1:66\r\n          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1\r\n          RX packets:75498956 errors:0 dropped:0 overruns:0 frame:0\r\n          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0\r\n          collisions:0 txqueuelen:0\r\n          RX bytes:1537411031 (1.4 GiB)  TX bytes:0 (0.0 B)\r\n\r\neth0      Link encap:Ethernet  HWaddr 00:1D:7E:43:E1:66\r\n          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1\r\n          RX packets:75525684 errors:0 dropped:0 overruns:0 frame:0\r\n          TX packets:84951464 errors:0 dropped:0 overruns:0 carrier:0\r\n          collisions:0 txqueuelen:1000\r\n          RX bytes:3219450758 (2.9 GiB)  TX bytes:3884550799 (3.6 GiB)\r\n          Interrupt:4\r\n\r\neth0.1    Link encap:Ethernet  HWaddr 00:1D:7E:43:E1:66\r\n          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1\r\n          RX packets:53110718 errors:0 dropped:0 overruns:0 frame:0\r\n          TX packets:22388245 errors:0 dropped:0 overruns:0 carrier:0\r\n          collisions:0 txqueuelen:0\r\n          RX bytes:2504502284 (2.3 GiB)  TX bytes:3943308308 (3.6 GiB)\r\n\r\neth0.2    Link encap:Ethernet  HWaddr 00:1D:7E:43:E1:66\r\n          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1\r\n          RX packets:22388245 errors:0 dropped:0 overruns:0 frame:0\r\n          TX packets:53110714 errors:0 dropped:0 overruns:0 carrier:0\r\n          collisions:0 txqueuelen:0\r\n          RX bytes:3629872878 (3.3 GiB)  TX bytes:3248052080 (3.0 GiB)\r\n\r\neth0.3    Link encap:Ethernet  HWaddr 00:1D:7E:43:E1:66\r\n          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1\r\n          RX packets:0 errors:0 dropped:0 overruns:0 frame:0\r\n          TX packets:9407187 errors:0 dropped:0 overruns:0 carrier:0\r\n          collisions:0 txqueuelen:0\r\n          RX bytes:0 (0.0 B)  TX bytes:625278740 (596.3 MiB)\r\n\r\neth0.4    Link encap:Ethernet  HWaddr 00:1D:7E:43:E1:66\r\n          inet addr:192.168.2.2  Bcast:192.168.2.255  Mask:255.255.255.0\r\n          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1\r\n          RX packets:6794 errors:0 dropped:0 overruns:0 frame:0\r\n          TX packets:8698 errors:0 dropped:0 overruns:0 carrier:0\r\n          collisions:0 txqueuelen:0\r\n          RX bytes:505751 (493.8 KiB)  TX bytes:2418973 (2.3 MiB)\r\n\r\neth1      Link encap:Ethernet  HWaddr 00:88:88:88:00:2A\r\n          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1\r\n          RX packets:95697991 errors:0 dropped:0 overruns:0 frame:0\r\n          TX packets:64587510 errors:0 dropped:0 overruns:0 carrier:0\r\n          collisions:0 txqueuelen:1000\r\n          RX bytes:1880088266 (1.7 GiB)  TX bytes:3105379375 (2.8 GiB)\r\n          Interrupt:5\r\n\r\nlo        Link encap:Local Loopback\r\n          inet addr:127.0.0.1  Mask:255.0.0.0\r\n          UP LOOPBACK RUNNING  MTU:16436  Metric:1\r\n          RX packets:1 errors:0 dropped:0 overruns:0 frame:0\r\n          TX packets:1 errors:0 dropped:0 overruns:0 carrier:0\r\n          collisions:0 txqueuelen:0\r\n          RX bytes:91 (91.0 B)  TX bytes:91 (91.0 B)\r\n\r\n\r\n\r\nroot@kenny:~# brctl show\r\nbridge name     bridge id               STP enabled     interfaces\r\nbr-bridgetap    8000.001d7e43e166       no              eth0.1\r\n                                                        eth0.2\r\n                                                        eth0.3\r\n                                                        \r\n</pre>","tagline":"WRT-SPAN: OpenWRT Switch Port ANalyzer (SPAN)","google":"UA-32148575-1","note":"Don't delete this file! It's used internally to help with page regeneration."}